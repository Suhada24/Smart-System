<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Smart School LMS</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="auth-container">
        <div class="auth-card">
            <div class="auth-logo">
                <img src="assests/images/logo.png" alt="Smart School LMS" onerror="this.src='https://via.placeholder.com/100x100'">
                <h2>Smart School LMS</h2>
            </div>
            
            <div class="auth-tabs">
                <button class="auth-tab active" data-tab="login">Login</button>
                <button class="auth-tab" data-tab="register">Register</button>
            </div>
            
            <div class="tab-content">
                <!-- Login Form -->
                <form id="loginForm" class="auth-form active" data-form="login">
                    <div class="form-group">
                        <label for="loginEmail">Email</label>
                        <div class="input-with-icon">
                            <span class="material-icons">email</span>
                            <input type="email" id="loginEmail" class="form-control" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="loginPassword">Password</label>
                        <div class="input-with-icon">
                            <span class="material-icons">lock</span>
                            <input type="password" id="loginPassword" class="form-control" required>
                            <span class="material-icons toggle-password">visibility_off</span>
                        </div>
                    </div>
                    
                    <div class="form-options">
                        <div class="checkbox">
                            <input type="checkbox" id="rememberMe">
                            <label for="rememberMe">Remember me</label>
                        </div>
                        <a href="#" class="forgot-password">Forgot Password?</a>
                    </div>
                    
                    <button type="submit" class="auth-btn">Sign In</button>
                    
                    <div class="social-login">
                        <p>Or sign in with:</p>
                        <div class="social-buttons">
                            <button type="button" class="social-btn google">
                                <img src="assests/images/google-icon.png" alt="Google" onerror="this.src='https://via.placeholder.com/20x20'">
                                Google
                            </button>
                            <button type="button" class="social-btn microsoft">
                                <img src="assests/images/microsoft-icon.png" alt="Microsoft" onerror="this.src='https://via.placeholder.com/20x20'">
                                Microsoft
                            </button>
                        </div>
                    </div>
                </form>
                
                <!-- Register Form -->
                <form id="registerForm" class="auth-form" data-form="register">
                    <div class="form-group">
                        <label for="registerName">Full Name</label>
                        <div class="input-with-icon">
                            <span class="material-icons">person</span>
                            <input type="text" id="registerName" class="form-control" required minlength="3">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="registerEmail">Email</label>
                        <div class="input-with-icon">
                            <span class="material-icons">email</span>
                            <input type="email" id="registerEmail" class="form-control" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="registerPassword">Password</label>
                        <div class="input-with-icon">
                            <span class="material-icons">lock</span>
                            <input type="password" id="registerPassword" class="form-control" required minlength="8">
                            <span class="material-icons toggle-password">visibility_off</span>
                        </div>
                        <div class="password-strength">
                            <div class="strength-meter">
                                <div class="strength-bar"></div>
                            </div>
                            <span class="strength-text">Password strength</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="registerConfirmPassword">Confirm Password</label>
                        <div class="input-with-icon">
                            <span class="material-icons">lock</span>
                            <input type="password" id="registerConfirmPassword" class="form-control" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="registerRole">Role</label>
                        <div class="input-with-icon">
                            <span class="material-icons">school</span>
                            <select id="registerRole" class="form-control" required>
                                <option value="">Select Role</option>
                                <option value="student">Student</option>
                                <option value="teacher">Teacher</option>
                                <option value="parent">Parent</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="checkbox">
                        <input type="checkbox" id="termsAccept" required>
                        <label for="termsAccept">I accept the <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a></label>
                    </div>
                    
                    <button type="submit" class="auth-btn">Create Account</button>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Password Reset Modal -->
    <div class="modal" id="passwordResetModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Reset Password</h3>
                <span class="material-icons close-modal">close</span>
            </div>
            <div class="modal-body">
                <p>Enter your email address and we'll send you a link to reset your password.</p>
                <form id="resetPasswordForm">
                    <div class="form-group">
                        <label for="resetEmail">Email</label>
                        <div class="input-with-icon">
                            <span class="material-icons">email</span>
                            <input type="email" id="resetEmail" class="form-control" required>
                        </div>
                    </div>
                    <button type="submit" class="auth-btn">Send Reset Link</button>
                </form>
            </div>
        </div>
    </div>
    
    <script>
        // Handle tab switching
        const authTabs = document.querySelectorAll('.auth-tab');
        const authForms = document.querySelectorAll('.auth-form');
        
        authTabs.forEach(tab => {
            tab.addEventListener('click', function() {
                // Update active tab
                authTabs.forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                
                // Show corresponding form
                const tabName = this.getAttribute('data-tab');
                authForms.forEach(form => {
                    form.classList.remove('active');
                    if (form.getAttribute('data-form') === tabName) {
                        form.classList.add('active');
                    }
                });
            });
        });
        
        // Toggle password visibility
        const togglePasswordBtns = document.querySelectorAll('.toggle-password');
        
        togglePasswordBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                const passwordInput = this.previousElementSibling;
                const type = passwordInput.getAttribute('type');
                passwordInput.setAttribute('type', type === 'password' ? 'text' : 'password');
                this.textContent = type === 'password' ? 'visibility' : 'visibility_off';
            });
        });
        
        // Password strength meter
        const passwordInput = document.getElementById('registerPassword');
        const strengthBar = document.querySelector('.strength-bar');
        const strengthText = document.querySelector('.strength-text');
        
        if (passwordInput) {
            passwordInput.addEventListener('input', function() {
                const value = this.value;
                let strength = 0;
                
                // Calculate password strength
                if (value.length >= 8) strength += 25;
                if (value.match(/[a-z]+/)) strength += 25;
                if (value.match(/[A-Z]+/)) strength += 25;
                if (value.match(/[0-9]+/) || value.match(/[^a-zA-Z0-9]+/)) strength += 25;
                
                // Update strength bar
                strengthBar.style.width = strength + '%';
                
                // Update strength text and color
                if (strength < 25) {
                    strengthBar.style.backgroundColor = '#f44336';
                    strengthText.textContent = 'Very Weak';
                } else if (strength < 50) {
                    strengthBar.style.backgroundColor = '#ff9800';
                    strengthText.textContent = 'Weak';
                } else if (strength < 75) {
                    strengthBar.style.backgroundColor = '#ffeb3b';
                    strengthText.textContent = 'Medium';
                } else if (strength < 100) {
                    strengthBar.style.backgroundColor = '#4caf50';
                    strengthText.textContent = 'Strong';
                } else {
                    strengthBar.style.backgroundColor = '#2e7d32';
                    strengthText.textContent = 'Very Strong';
                }
            });
        }
        
        // Forgot password modal
        const forgotPasswordLink = document.querySelector('.forgot-password');
        const passwordResetModal = document.getElementById('passwordResetModal');
        const closeModal = document.querySelector('.close-modal');
        
        if (forgotPasswordLink) {
            forgotPasswordLink.addEventListener('click', function(e) {
                e.preventDefault();
                passwordResetModal.style.display = 'flex';
            });
        }
        
        if (closeModal) {
            closeModal.addEventListener('click', function() {
                passwordResetModal.style.display = 'none';
            });
        }
        
        // Close modal when clicking outside
        window.addEventListener('click', function(e) {
            if (e.target === passwordResetModal) {
                passwordResetModal.style.display = 'none';
            }
        });
        
        // Form validation
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');
        const resetPasswordForm = document.getElementById('resetPasswordForm');
        
        function validateForm(form) {
            let isValid = true;
            
            // Check all required fields
            const requiredInputs = form.querySelectorAll('[required]');
            requiredInputs.forEach(input => {
                if (input.value.trim() === '') {
                    showError(input, 'This field is required');
                    isValid = false;
                } else {
                    removeError(input);
                }
            });
            
            // Validate email format
            const emailInputs = form.querySelectorAll('input[type="email"]');
            emailInputs.forEach(input => {
                if (input.value.trim() !== '') {
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    if (!emailRegex.test(input.value)) {
                        showError(input, 'Please enter a valid email address');
                        isValid = false;
                    }
                }
            });
            
            // Check password length
            const passwordInputs = form.querySelectorAll('input[type="password"]');
            passwordInputs.forEach(input => {
                if (input.value.trim() !== '' && input.minLength > 0) {
                    if (input.value.length < input.minLength) {
                        showError(input, `Password must be at least ${input.minLength} characters`);
                        isValid = false;
                    }
                }
            });
            
            // Check password confirmation
            if (form.id === 'registerForm') {
                const password = document.getElementById('registerPassword');
                const confirmPassword = document.getElementById('registerConfirmPassword');
                
                if (password.value !== confirmPassword.value) {
                    showError(confirmPassword, 'Passwords do not match');
                    isValid = false;
                }
            }
            
            return isValid;
        }
        
        function showError(input, message) {
            // Remove any existing error
            removeError(input);
            
            // Get the parent form-group
            const formGroup = input.closest('.form-group');
            
            // Add error class to input
            input.classList.add('error');
            
            // Create error message element
            const errorElement = document.createElement('div');
            errorElement.className = 'error-message';
            errorElement.textContent = message;
            
            // Append error message to form group
            formGroup.appendChild(errorElement);
        }
        
        function removeError(input) {
            // Get the parent form-group
            const formGroup = input.closest('.form-group');
            
            // Remove error class from input
            input.classList.remove('error');
            
            // Remove error message if exists
            const errorElement = formGroup.querySelector('.error-message');
            if (errorElement) {
                errorElement.remove();
            }
        }
        
        // Form submission
        if (loginForm) {
            loginForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                if (validateForm(this)) {
                    // Show loading indicator or some feedback
                    const submitBtn = this.querySelector('button[type="submit"]');
                    submitBtn.disabled = true;
                    submitBtn.textContent = 'Signing in...';
                    
                    // For demo purposes, simulate login success
                    setTimeout(() => {
                        window.location.href = 'index.html';
                    }, 1500);
                }
            });
        }
        
        if (registerForm) {
            registerForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                if (validateForm(this)) {
                    // Show loading indicator
                    const submitBtn = this.querySelector('button[type="submit"]');
                    submitBtn.disabled = true;
                    submitBtn.textContent = 'Creating account...';
                    
                    // For demo purposes, simulate registration success
                    setTimeout(() => {
                        alert('Account created successfully! Please check your email to verify your account.');
                        
                        // Reset form and switch to login tab
                        this.reset();
                        document.querySelector('.auth-tab[data-tab="login"]').click();
                        
                        // Reset button
                        submitBtn.disabled = false;
                        submitBtn.textContent = 'Create Account';
                    }, 1500);
                }
            });
        }
        
        if (resetPasswordForm) {
            resetPasswordForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                if (validateForm(this)) {
                    // Show loading indicator
                    const submitBtn = this.querySelector('button[type="submit"]');
                    submitBtn.disabled = true;
                    submitBtn.textContent = 'Sending...';
                    
                    // For demo purposes, simulate success
                    setTimeout(() => {
                        alert('Password reset link has been sent to your email!');
                        passwordResetModal.style.display = 'none';
                        
                        // Reset form and button
                        this.reset();
                        submitBtn.disabled = false;
                        submitBtn.textContent = 'Send Reset Link';
                    }, 1500);
                }
            });
        }
        
        // Initialize theme from localStorage
        function initTheme() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
        }
        
        // Call the theme initialization function
        initTheme();
    </script>
</body>
</html>